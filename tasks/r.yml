- name: Install dependencies
  become: true
  apt:
    pkg:
      - dirmngr
      - gpg-agent
      - software-properties-common
    install_recommends: false

- name: Add GPG key
  become: true
  apt_key:
    url: https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc

- name: Add apt repository
  become: true
  apt_repository:
    repo: deb https://cloud.r-project.org/bin/linux/ubuntu {{ ansible_distribution_release }}-cran40/

- name: Install R
  become: true
  apt:
    pkg: r-base
    install_recommends: false

- name: Install radian
  become: true
  pip:
    name: radian

- name: Install extras and packages dependencies
  become: true
  apt:
    pkg:
      - libcurl4-openssl-dev
      - libssl-dev
      - libxml2-dev
      - pandoc
      - texlive-full

- name: Install packages
  shell: Rscript -e 'install.packages(c("data.table", "devtools", "renv", "shiny", "tidyverse"), repos = "https://cloud.r-project.org/")'
